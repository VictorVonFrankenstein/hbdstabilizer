
// Intended as pseudocode. Details such as type conversions, signing transactions, etc. are deliberately left out

hive = get_hive_api()
exchange = get_external_exchange_api();
stabilzer_account = “hbdstabilizer”
dao_account = “hive.fund”

while true
    a = hive.get_account(stabilizer_account)
    hive_bal = a.balance
    hbd_bal = a.hbd_balance
    hive_price = exchange.get_price(“HIVE”)
    best_offer = hive.get_order_book(1).asks[0]
    reward_hbd = a.reward_hbd_balance
    reward_hive = a.reward_hive_balance
    reward_vests = a.reward_vesting_balance

    if reward_hbd > 0.1 or reward_hive > 0.1 or reward_vests > 200
        hive.claim_reward_balance(stabilizer_account,reward_hive,reward_hbd,reward_vests)
    else if hbd_bal > 0.1
        if hive_price < best_offer.real_price
            hive.transfer(stabilizer_account,dao_account,hbd_bal,””)
        else
            hive.create_order(stabilizer_account,hbd_bal,floor(hbd_bal*1000*best_offer.base/best_offer.quote)/1000,false,3)
    else if hive_bal > 0.1
        hive.transfer(stabilizer_account,dao_account,hive_bal,””)
    else if (a.vesting_withdraw_rate == 0 and a.vesting_shares > 200
        hive.withdraw_vesting(stabilizer_account,a.vesting_shares)
    sleep("30 seconds")
